$(document).ready(function(){"use strict";var n;$("#delete_modal").on("show.bs.modal",function(t){n=$(t.relatedTarget).data("model-id")});$("#delete_modal").ready(function(){$("#confirm_delete").on("click",function(){var t=$(this);t.button("loading");var i=JSON.stringify(n),r="/Finances/DeleteFinance";console.debug("POST "+r+": "+i);$.ajax({url:r,type:"POST",contentType:"application/json; charset=utf-8",data:i,success:function(i){console.debug(i);i.code==0?($(".toast").text(i.message).fadeIn(400).delay(3e3).fadeOut(400),$("body").find("table").find("tr[data-model-id='"+n+"']").remove(),$("#delete_modal").modal("hide")):($("#delete_modal").modal("hide"),$(".toast").text(i.message).fadeIn(400).delay(3e3).fadeOut(400));t.button("reset")},error:function(n){t.button("reset");console.debug(n);alert("Problema! Verifique sua conex\u00e3o com a internet e tente novamente.")}})})});$("[data-toggle='popover']").popover({html:!0,title:'<span class="text-danger"><strong>Aten\u00e7\u00e3o meu querido<\/strong><\/span><button type="button" class="btn btn-default close" onclick="$(&quot;a#update-status-popover&quot;).popover(&quot;hide&quot;);">\u00d7<\/button>',placement:"right",content:function(){var t=$(this).prop("class"),n=$(this).text(),u=$(this).data("model-id"),i,r;return n=="Pago"?(n=" Pendente",t="btn btn-warning",i="glyphicon glyphicon-remove",r=0):n=="Pendente"&&(n=" Pago",t="btn btn-success",i="glyphicon glyphicon-ok",r=1),"Atualizar Status de Finan\u00e7a <br/><br/><button class='"+t+"' data-status='"+r+"' data-model-id='"+u+"' id='confirm_status'><span class='"+i+"'><\/span>"+n+"<\/button>"}}).parent().delegate("button#confirm_status","click",function(){console.log("Model id ",$(this).data("model-id"),"status ",$(this).data("status"));var t=$(this).data("model-id"),n=$(this).data("status"),u=n==1?"label label-success":"label label-warning",f=n==1?"Pago":"Pendente",i="Finances/UpdateStatus",r=JSON.stringify({id:t,status:n});console.debug("POST ",i,": ",r);$.ajax({url:i,type:"POST",contentType:"application/json; charset=UTF-8",data:r,success:function(n){console.debug(n);$(".toast").text(n.message).fadeIn(400).delay(2500).fadeOut(400);$("#finance-table").find("tr[data-model-id='"+t+"'] td a#update-status-popover").attr({"class":u}).text(f);$("a#update-status-popover").popover("hide")},error:function(n){console.error(n);$("a#update-status-popover").popover("hide")}})})});