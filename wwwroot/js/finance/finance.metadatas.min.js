$(document).ready(function(){(function(){"use strict";var i,n,t,r=$("#userId").val();$("#modal").on("show.bs.modal",function(i){var r=$(i.relatedTarget),f=$(this),u=r.data("type"),e=r.data("name");f.find(".modal-title").text("Novo "+e);u=="FinanceType"?(n="/Finances/CreateFinanceType",t="finance_type_table"):u=="Place"&&(n="/Finances/CreatePlace",t="place_table")});$("#modal_confirm").on("click",function(){var u=$(this),e,f;u.button("reset");i=$("#modal_content").val();e="application/json; charset=utf-8";f=JSON.stringify({id:r,name:i});console.debug("POST ",n,": ",f);$.ajax({url:n,type:"POST",contentType:e,data:f,success:function(n){console.debug(n);u.button("reset");$("#modal_content").val("");n.type!="error"&&($("#"+t).find("tbody").prepend("<tr data-model-id='"+n.code+"'><td>"+n.code+"<\/td><td class='text-info'><strong>"+n.message+"<\/strong><\/td><td><a data-model-id='"+n.code+"' data-toggle='modal' data-target='#delete_modal' data-name='"+n.message+"' data-type='"+n.type+"' href='#'><span class='glyphicon glyphicon-trash text-danger'><\/span><\/a><\/td><\/tr>"),$(".toast").text(n.message+" Salvo!").fadeIn(400).delay(2500).fadeOut(400),$("#modal").modal("hide"))},error:function(n){u.button("reset");console.debug(n);alert("Problema! Verifique sua conex\u00e3o com a internet e tente novamente.")}})})})(),function(){"use strict";var t,i,r,n,u;$("#delete_modal").on("show.bs.modal",function(f){var e=$(f.relatedTarget),o=$(this);r=e.data("name");u=e.data("type");t=e.data("model-id");o.find(".modal-body p").text("Tem certeza que deseja apagar "+r+"?");u=="FinanceType"?(n="/Finances/DeleteFinanceType",i="finance_type_table"):u=="Place"&&(n="/Finances/DeletePlace",i="place_table")});$("#confirm_delete").on("click",function(){var u=$(this);u.button("loading");var e=$("#"+i),f=JSON.stringify(t);console.debug("POST "+n+": "+f);$.ajax({url:n,type:"POST",contentType:"application/json; charset=utf-8",data:f,success:function(n){n.code==0?(console.debug(n),$(".toast").text(r+" Apagado!").fadeIn(400).delay(3e3).fadeOut(400),e.find("tr[data-model-id='"+t+"']").remove(),u.button("reset"),$("#delete_modal").modal("hide")):(u.attr({disabled:!1}),$("#delete_modal").modal("hide"),$(".toast").text(n.message).fadeIn(400).delay(3e3).fadeOut(400))},error:function(n){u.attr({disabled:!1});console.debug(n);alert("Problema! Verifique sua conex\u00e3o com a internet e tente novamente.")}})})}()});